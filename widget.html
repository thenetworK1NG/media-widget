<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Widget</title>
    <link rel="stylesheet" href="widget.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1db954">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div id="spotify-widget" class="widget-container">
        <div id="playlist-widget" class="widget-container" style="position:fixed;top:80px;right:40px;min-width:300px;max-width:350px;display:block;">
            <header class="widget-header">
                <span>User Playlists</span>
                <button id="playlist-close" title="Close">&times;</button>
            </header>
            <main>
                <ul id="playlist-list" style="max-height:350px;overflow-y:auto;padding:0;margin:0;list-style:none;"></ul>
            </main>
        </div>
<script>
// Make playlist widget draggable
function makeDraggable(el) {
    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
    el.querySelector('.widget-header').onmousedown = dragMouseDown;
    function dragMouseDown(e) {
        e = e || window.event;
        e.preventDefault();
        pos3 = e.clientX;
        pos4 = e.clientY;
        document.onmouseup = closeDragElement;
        document.onmousemove = elementDrag;
    }
    function elementDrag(e) {
        e = e || window.event;
        e.preventDefault();
        pos1 = pos3 - e.clientX;
        pos2 = pos4 - e.clientY;
        pos3 = e.clientX;
        pos4 = e.clientY;
        el.style.top = (el.offsetTop - pos2) + "px";
        el.style.left = (el.offsetLeft - pos1) + "px";
    }
    function closeDragElement() {
        document.onmouseup = null;
        document.onmousemove = null;
    }
}
makeDraggable(document.getElementById('playlist-widget'));

// Show playlist widget (for demo, show after login)
document.getElementById('widget-login-btn').addEventListener('click', function() {
    document.getElementById('playlist-widget').style.display = 'block';
});
document.getElementById('playlist-close').onclick = function() {
    document.getElementById('playlist-widget').style.display = 'none';
};
</script>
        <header class="widget-header">
            <span>Spotify Player</span>
            <button id="widget-close" title="Close">&times;</button>
        </header>
        <main id="widget-player-main" style="display:none;">
            <section class="player-area">
                <div class="album-art-wrapper">
                    <img id="widget-album-art" src="" alt="Album Art" class="album-art-img" />
                </div>
                <div class="track-info">
                    <span id="widget-track-name-main">Track Name</span>
                    <span id="widget-artist-name-main">Artist Name</span>
                </div>
                <div class="player-controls">
                    <button class="player-btn" id="widget-repeat-btn" title="Repeat"><i class="fa fa-repeat"></i></button>
                    <button class="player-btn" id="widget-prev-btn" title="Previous"><i class="fa fa-fast-backward"></i></button>
                    <button class="player-btn play-btn" id="widget-play-btn" title="Play"><i class="fa fa-play"></i></button>
                    <button class="player-btn" id="widget-next-btn" title="Next"><i class="fa fa-fast-forward"></i></button>
                    <button class="player-btn" id="widget-shuffle-btn" title="Shuffle"><i class="fa fa-random"></i></button>
                </div>
            </section>
        </main>
        <footer class="widget-footer">
            <div class="title">
                <span id="widget-track-name">Track Name</span> - <span id="widget-artist-name">Artist Name</span>
            </div>
            <div class="time-tracker">
                <span id="widget-current-time">0:00</span> / <span id="widget-duration">0:00</span>
            </div>
        </footer>
        <div class="search-bar">
            <input type="text" id="widget-song-search-input" placeholder="Search for a song...">
            <button id="widget-song-search-btn">Search</button>
        </div>
        <div class="tracks">
            <h3>Tracks</h3>
            <ul id="widget-track-list"></ul>
        </div>
        <button id="widget-login-btn" style="margin-top:1rem;">Login with Spotify</button>
    <button id="install-btn" style="margin:1rem;display:none;background:#2196f3;color:#fff;padding:0.5rem 1rem;border:none;border-radius:6px;cursor:pointer;">Install App</button>
    </div>
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('service-worker.js');
                });
            }
        </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="widget.js"></script>
<style>
    body {
        background: transparent;
        margin: 0;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .widget-container {
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        border-radius: 16px;
        background: #181818;
        padding: 2rem 1.5rem;
        min-width: 320px;
        max-width: 350px;
        margin: auto;
        position: relative;
        z-index: 10;
    }
</style>
</body>
